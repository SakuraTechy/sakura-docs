import{_ as W,p as a,h as F,v as j,x as G,c as v,o as r,j as t,e as w,t as c,a0 as g,P as z,n as _,ao as X,ap as A,a as J,F as K,B as O}from"./framework.DmV6WhQo.js";const Q="/assets/qrcode.BjnTPhTd.png",Y=["muted","poster","autoplay"],Z=["src"],ee={class:"center-controls"},te={key:0,class:"play-button"},le={key:1,class:"video-info"},se={class:"video-title"},oe={class:"video-subtitle"},ae={class:"qr-code-tip"},ne={class:"control-bar"},ue={key:0,viewBox:"0 0 24 24",fill:"currentColor"},ie={key:1,viewBox:"0 0 24 24",fill:"currentColor"},ve={class:"time-display"},re={class:"volume-control"},de={key:0,viewBox:"0 0 24 24",fill:"currentColor"},ce={key:1,viewBox:"0 0 24 24",fill:"currentColor"},fe={key:2,viewBox:"0 0 24 24",fill:"currentColor"},me={class:"right-controls"},pe={key:0,class:"speed-menu"},he=["onClick"],ge={__name:"VideoGlass",props:{src:{type:String,required:!0},poster:{type:String,default:""},title:{type:String,default:"产品演示"},subtitle:{type:String,default:"探索创新科技"},qr_subtitle:{type:String,default:"更多请扫描二维码"},lazyLoad:{type:Boolean,default:!0},width:{type:String,default:"100%"},height:{type:String,default:"auto"},maxWidth:{type:String,default:"100%"},autoplay:{type:Boolean,default:!1}},setup(u){const n=a(null),s=a(null),C=a(null),i=a(!1),b=a(!1),f=a(!0),y=a(!1),m=a(!1),x=a(0),p=a(0),h=a(1),E=a(1),L=a(!1),d=a(!1),M=a(null),B=a(!1),V=F(()=>p.value===0?0:x.value/p.value*100),S=e=>{const l=Math.floor(e/60),o=Math.floor(e%60);return`${l}:${o<10?"0":""}${o}`},T=()=>{const e=n.value;e&&(e.paused?(e.play(),i.value=!0,b.value=!0):(e.pause(),i.value=!1))},R=()=>{f.value=!f.value,n.value&&(n.value.muted=f.value)},D=()=>{n.value&&(n.value.volume=h.value)},I=()=>{L.value=!L.value},N=e=>{E.value=e,n.value&&(n.value.playbackRate=e),L.value=!1},U=e=>{y.value=!0,m.value=!0,H(e);const l=k=>{y.value&&H(k)},o=()=>{y.value=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",o),m.value||(m.value=!1)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",o)},H=e=>{if(!C.value)return;const l=C.value.getBoundingClientRect(),o=e.clientX-l.left,k=Math.min(Math.max(o/l.width,0),1);n.value&&(n.value.currentTime=k*p.value,x.value=k*p.value)},P=()=>{s.value&&(document.fullscreenElement?(document.exitFullscreen(),d.value=!1):(s.value.requestFullscreen(),d.value=!0),s.value&&(d.value?s.value.classList.add("is-fullscreen"):s.value.classList.remove("is-fullscreen")))},$=F(()=>f.value||h.value===0?"muted":h.value<.5?"low":"high"),q=()=>{!d.value||!i.value||(M.value&&clearTimeout(M.value),B.value=!1,s.value&&s.value.classList.remove("cursor-hidden"),M.value=setTimeout(()=>{d.value&&i.value&&(B.value=!0,s.value&&s.value.classList.add("cursor-hidden"))},3e3))};return j(()=>{const e=n.value;e&&(e.addEventListener("timeupdate",()=>{x.value=e.currentTime}),e.addEventListener("loadedmetadata",()=>{p.value=e.duration}),e.addEventListener("play",()=>{i.value=!0,b.value=!0}),e.addEventListener("pause",()=>{i.value=!1}),document.addEventListener("click",()=>{L.value=!1}),e.volume=h.value,e.muted=f.value,document.addEventListener("fullscreenchange",()=>{d.value=!!document.fullscreenElement,s.value&&(d.value?s.value.classList.add("is-fullscreen"):s.value.classList.remove("is-fullscreen"))}),s.value&&s.value.addEventListener("mousemove",q))}),G(()=>{const e=n.value;e&&(e.removeEventListener("timeupdate",()=>{}),e.removeEventListener("loadedmetadata",()=>{}),e.removeEventListener("play",()=>{}),e.removeEventListener("pause",()=>{}),document.removeEventListener("click",()=>{}),document.removeEventListener("fullscreenchange",()=>{}),s.value&&s.value.removeEventListener("mousemove",q),M.value&&clearTimeout(M.value))}),(e,l)=>(r(),v("div",{class:_(["video-container glass",{"is-playing":i.value,"is-fullscreen":d.value}]),style:z({width:u.width,height:u.height==="auto"?"auto":u.height,maxWidth:u.maxWidth}),ref_key:"containerRef",ref:s,onDblclick:P},[t("video",{ref_key:"videoRef",ref:n,loop:"",muted:f.value,playsinline:"",poster:u.poster,class:"video-element",preload:"metadata",autoplay:u.autoplay},[t("source",{src:u.src,type:"video/mp4"},null,8,Z)],8,Y),t("div",{class:"controls-overlay",onClick:T},[t("div",ee,[!i.value&&!b.value?(r(),v("div",te,l[3]||(l[3]=[t("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M8 5v14l11-7z"})],-1)]))):w("",!0),!i.value&&b.value?(r(),v("div",le,[t("p",se,c(u.title),1),t("p",oe,c(u.subtitle),1),t("div",ae,[t("p",null,c(u.qr_subtitle),1),l[4]||(l[4]=t("img",{src:Q,alt:"二维码",class:"qr-code-image"},null,-1))])])):w("",!0)]),t("div",ne,[t("button",{class:"control-btn",onClick:g(T,["stop"])},[i.value?(r(),v("svg",ue,l[5]||(l[5]=[t("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)]))):(r(),v("svg",ie,l[6]||(l[6]=[t("path",{d:"M8 5v14l11-7z"},null,-1)])))]),t("div",ve,c(S(x.value))+" / "+c(S(p.value)),1),t("div",{class:"progress-container",ref_key:"progressContainer",ref:C,onMousedown:g(U,["stop"]),onMouseover:l[0]||(l[0]=o=>m.value=!0),onMouseleave:l[1]||(l[1]=o=>m.value=!!y.value)},[t("div",{class:"progress-bar",style:z({width:`${V.value}%`})},null,4),t("div",{class:_(["progress-handle",{active:y.value||m.value}]),style:z({left:`${V.value}%`})},null,6)],544),t("div",re,[t("button",{class:"control-btn",onClick:g(R,["stop"])},[$.value==="muted"?(r(),v("svg",de,l[7]||(l[7]=[t("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"},null,-1)]))):$.value==="low"?(r(),v("svg",ce,l[8]||(l[8]=[t("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"},null,-1)]))):(r(),v("svg",fe,l[9]||(l[9]=[t("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},null,-1)])))]),X(t("input",{type:"range",min:"0",max:"1",step:"0.1","onUpdate:modelValue":l[2]||(l[2]=o=>h.value=o),class:"volume-slider",onInput:D},null,544),[[A,h.value]])]),t("div",me,[t("button",{class:"control-btn speed-btn",onClick:g(I,["stop"])},[J(c(E.value)+"x ",1),L.value?(r(),v("div",pe,[(r(),v(K,null,O([.5,.75,1,1.25,1.5,2],o=>t("div",{key:o,class:_(["speed-option",{active:E.value===o}]),onClick:g(k=>N(o),["stop"])},c(o)+"x ",11,he)),64))])):w("",!0)]),t("button",{class:"control-btn fullscreen-btn",onClick:g(P,["stop"])},l[10]||(l[10]=[t("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})],-1)]))])])])],38))}},Le=W(ge,[["__scopeId","data-v-b1e8d909"]]);export{Le as default};
