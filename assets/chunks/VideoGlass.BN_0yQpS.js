import{_ as G,p as u,h as D,v as X,x as A,c as i,o as d,j as l,e as z,t as p,a0 as y,P as V,n as _,ao as J,ap as K,a as O,F as Q,B as Y}from"./framework.DmV6WhQo.js";const Z="/assets/qrcode.BjnTPhTd.png",ee=["muted","poster","autoplay"],te=["src"],le={class:"center-controls"},se={key:0,class:"play-button"},ae={key:1,class:"video-info"},ue={class:"video-title"},oe={class:"video-subtitle"},ne={class:"qr-code-tip"},ve={class:"control-bar"},re={key:0,viewBox:"0 0 24 24",fill:"currentColor"},ie={key:1,viewBox:"0 0 24 24",fill:"currentColor"},de={class:"time-display"},ce={class:"volume-control"},me={key:0,viewBox:"0 0 24 24",fill:"currentColor"},fe={key:1,viewBox:"0 0 24 24",fill:"currentColor"},pe={key:2,viewBox:"0 0 24 24",fill:"currentColor"},he={class:"right-controls"},ge={key:0,class:"speed-menu"},ye=["onClick"],Le={__name:"VideoGlass",props:{src:{type:String,required:!0},poster:{type:String,default:""},title:{type:String,default:"产品演示"},subtitle:{type:String,default:"探索创新科技"},qr_subtitle:{type:String,default:"更多请扫描二维码"},lazyLoad:{type:Boolean,default:!0},width:{type:String,default:"100%"},height:{type:String,default:"auto"},maxWidth:{type:String,default:"100%"},autoplay:{type:Boolean,default:!1}},setup(v){const o=u(null),s=u(null),w=u(null),n=u(!1),E=u(!1),r=u(!0),L=u(!1),h=u(!1),b=u(0),g=u(0),m=u(1),x=u(1),M=u(!1),c=u(!1),f=u(null),C=u(!1),B=D(()=>g.value===0?0:b.value/g.value*100),S=t=>{const e=Math.floor(t/60),a=Math.floor(t%60);return`${e}:${a<10?"0":""}${a}`},T=()=>{const t=o.value;t&&(t.paused?(t.play(),n.value=!0,E.value=!0):(t.pause(),n.value=!1))},j=()=>{r.value=!r.value,o.value&&(o.value.muted=r.value,!r.value&&m.value===0&&(m.value=.5,o.value.volume=.5))},I=t=>{const e=parseFloat(t.target.value);m.value=e,o.value&&(o.value.volume=e,e===0?(r.value=!0,o.value.muted=!0):r.value&&(r.value=!1,o.value.muted=!1))},N=()=>{M.value=!M.value},U=t=>{x.value=t,o.value&&(o.value.playbackRate=t),M.value=!1},W=t=>{L.value=!0,h.value=!0,H(t);const e=k=>{L.value&&H(k)},a=()=>{L.value=!1,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",a),h.value||(h.value=!1)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",a)},H=t=>{if(!w.value)return;const e=w.value.getBoundingClientRect(),a=t.clientX-e.left,k=Math.min(Math.max(a/e.width,0),1);o.value&&(o.value.currentTime=k*g.value,b.value=k*g.value)},P=()=>{s.value&&(document.fullscreenElement?(document.exitFullscreen(),c.value=!1):(s.value.requestFullscreen(),c.value=!0),s.value&&(c.value?s.value.classList.add("is-fullscreen"):s.value.classList.remove("is-fullscreen")))},$=D(()=>r.value||m.value===0?"muted":m.value<.5?"low":"high"),q=()=>{!c.value||!n.value||(f.value&&clearTimeout(f.value),C.value=!1,s.value&&s.value.classList.remove("cursor-hidden"),f.value=setTimeout(()=>{c.value&&n.value&&(C.value=!0,s.value&&s.value.classList.add("cursor-hidden"))},3e3))},F=()=>{n.value&&s.value&&s.value.classList.add("hover")},R=()=>{n.value&&(s.value&&(s.value.classList.remove("hover"),c.value&&(C.value=!0,s.value.classList.add("cursor-hidden"))),f.value&&clearTimeout(f.value))};return X(()=>{const t=o.value;t&&(t.addEventListener("timeupdate",()=>{b.value=t.currentTime}),t.addEventListener("loadedmetadata",()=>{g.value=t.duration}),t.addEventListener("play",()=>{n.value=!0,E.value=!0}),t.addEventListener("pause",()=>{n.value=!1}),document.addEventListener("click",()=>{M.value=!1}),t.volume=m.value,t.muted=r.value,document.addEventListener("fullscreenchange",()=>{c.value=!!document.fullscreenElement,s.value&&(c.value?s.value.classList.add("is-fullscreen"):s.value.classList.remove("is-fullscreen"))}),s.value&&(s.value.addEventListener("mouseenter",F),s.value.addEventListener("mouseleave",R),s.value.addEventListener("mousemove",q)))}),A(()=>{const t=o.value;t&&(t.removeEventListener("timeupdate",()=>{}),t.removeEventListener("loadedmetadata",()=>{}),t.removeEventListener("play",()=>{}),t.removeEventListener("pause",()=>{}),document.removeEventListener("click",()=>{}),document.removeEventListener("fullscreenchange",()=>{}),s.value&&(s.value.removeEventListener("mouseenter",F),s.value.removeEventListener("mouseleave",R),s.value.removeEventListener("mousemove",q)),f.value&&clearTimeout(f.value))}),(t,e)=>(d(),i("div",{class:_(["video-container glass",{"is-playing":n.value,"is-fullscreen":c.value}]),style:V({width:v.width,height:v.height==="auto"?"auto":v.height,maxWidth:v.maxWidth}),ref_key:"containerRef",ref:s,onDblclick:P},[l("video",{ref_key:"videoRef",ref:o,loop:"",muted:r.value,playsinline:"",poster:v.poster,class:"video-element",preload:"metadata",autoplay:v.autoplay},[l("source",{src:v.src,type:"video/mp4"},null,8,te)],8,ee),l("div",{class:"controls-overlay",onClick:T},[l("div",le,[!n.value&&!E.value?(d(),i("div",se,e[3]||(e[3]=[l("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M8 5v14l11-7z"})],-1)]))):z("",!0),!n.value&&E.value?(d(),i("div",ae,[l("p",ue,p(v.title),1),l("p",oe,p(v.subtitle),1),l("div",ne,[l("p",null,p(v.qr_subtitle),1),e[4]||(e[4]=l("img",{src:Z,alt:"二维码",class:"qr-code-image"},null,-1))])])):z("",!0)]),l("div",ve,[l("button",{class:"control-btn",onClick:y(T,["stop"])},[n.value?(d(),i("svg",re,e[5]||(e[5]=[l("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)]))):(d(),i("svg",ie,e[6]||(e[6]=[l("path",{d:"M8 5v14l11-7z"},null,-1)])))]),l("div",de,p(S(b.value))+" / "+p(S(g.value)),1),l("div",{class:"progress-container",ref_key:"progressContainer",ref:w,onMousedown:y(W,["stop"]),onMouseover:e[0]||(e[0]=a=>h.value=!0),onMouseleave:e[1]||(e[1]=a=>h.value=!!L.value)},[l("div",{class:"progress-bar",style:V({width:`${B.value}%`})},null,4),l("div",{class:_(["progress-handle",{active:L.value||h.value}]),style:V({left:`${B.value}%`})},null,6)],544),l("div",ce,[l("button",{class:"control-btn",onClick:y(j,["stop"])},[$.value==="muted"?(d(),i("svg",me,e[7]||(e[7]=[l("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"},null,-1)]))):$.value==="low"?(d(),i("svg",fe,e[8]||(e[8]=[l("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"},null,-1)]))):(d(),i("svg",pe,e[9]||(e[9]=[l("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},null,-1)])))]),J(l("input",{type:"range",min:"0",max:"1",step:"0.1","onUpdate:modelValue":e[2]||(e[2]=a=>m.value=a),class:"volume-slider",onInput:I},null,544),[[K,m.value]])]),l("div",he,[l("button",{class:"control-btn speed-btn",onClick:y(N,["stop"])},[O(p(x.value)+"x ",1),M.value?(d(),i("div",ge,[(d(),i(Q,null,Y([.5,.75,1,1.25,1.5,2],a=>l("div",{key:a,class:_(["speed-option",{active:x.value===a}]),onClick:y(k=>U(a),["stop"])},p(a)+"x ",11,ye)),64))])):z("",!0)]),l("button",{class:"control-btn fullscreen-btn",onClick:y(P,["stop"])},e[10]||(e[10]=[l("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})],-1)]))])])])],38))}},ke=G(Le,[["__scopeId","data-v-d1dc3023"]]);export{ke as default};
